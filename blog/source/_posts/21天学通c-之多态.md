---
title: 21天学通c++之多态
date: 2019-09-24 17:05:37
tags:
---



    单继承的问题
        有一个对象即需要类A的属性，也需要使用类B的函数，这样从类A派生的话就没法用类B的函数，从类B派生就没法使用类A的属性，怎么办？
    多重继承：class demo1:public demo2, public demo3
        多重继承对象的组成部分
    虚继承
        程序清单12.6 使用虚继承

        #include <iostream>
        using namespace std;

        typedef int HANDS;
        enum COLOR { Red, Green, Blue, Yellow, White, Black, Brown };

        class Animal
        {
        public:
            Animal(int);
            virtual ~Animal() { cout << "Animal destructorl...\n"; }
            virtual int GetAge() const { return itsAge; }
            virtual void SetAge(int age) { itsAge = age; }
        private:
            int itsAge;
        };

        class Horse:virtual public Animal //这里就是虚继承的写法
        {
        public:
            Horse(COLOR color, HANDS height, int age);
            virtual ~Horse() { cout << "Horse destructor...\n"; }
            virtual void Whinny() const { cout << "Whinny...\n"; }
            virtual COLOR GetColor() const { return itsColor; }
            virtual HANDS GetHeight() const { return itsHeight; }

        protected:
            COLOR itsColor;
            HANDS itsHeight;
        };

        class Bird:virtual public Animal //这里也是虚继承的写法
        {
        public:
            Bird(COLOR color, bool migrates, int age);
            virtual ~Bird(){ cout << "Bird destructor...\n"; }
            virtual void Fly() const { cout << "I can fly!\n"; }
            virtual void Chirp() const { cout << "Chirp...\n"; }
            virtual COLOR GetColor() const { return itsColor; }
            virtual bool GetMigration() const {return itsMigration; }

        protected:
            COLOR itsColor;
            bool itsMigration;
        };

        class Pegasus:public Horse, public Bird
        {
        public:
            void Chirp() const { Whinny(); }
            Pegasus(COLOR, HANDS, bool, long, int);
            virtual ~Pegasus() { cout << "Pegasus destruction...\n"; }
            virtual long GetNumberBelievers() const { return itsNumberBelievers; }
            virtual COLOR GetColor() const { return Horse::itsColor; }

        private:
            long itsNumberBelievers;
        };

        Animal::Animal(int age) {
            cout << "Animal destructor...\n";
        }

        Horse::Horse(COLOR color, HANDS height, int age):Animal(age), itsColor(color), itsHeight(height) {
            cout << "Horse constructor...\n";
        }

        Bird::Bird(COLOR color, bool migrates, int age):Animal(age), itsColor(color), itsMigration(migrates) {
            cout << "Bird constructor...\n";
        }

        Pegasus::Pegasus(COLOR acolor, HANDS height, bool migration, long numberbelievers, int age):Horse(acolor, height, age), Bird(acolor, migration, age), Animal(age*2), itsNumberBelievers(numberbelievers) {
            cout << "Pegasus constructor...\n";
        }

        int main()
        {
            Pegasus *pPeg = new Pegasus(Red, 5, true, 10, 2);
            int age = pPeg->GetAge();
            cout << age;
            delete pPeg;
            return 0;
        }

