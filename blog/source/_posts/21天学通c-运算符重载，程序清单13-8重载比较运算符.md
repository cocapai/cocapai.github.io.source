---
title: 21天学通c++ 运算符重载，程序清单13.8重载比较运算符
date: 2019-09-24 17:28:54
tags:
---

 
```
#include <iostream>

using namespace std;

class CDate
{
private:
    int m_nDay;
    int m_nMonth;
    int m_nYear;

    void AddDays (int nDaysToAdd);
    void AddMonths (int nMonthsToAdd);
    void AddYears (int m_nYearsToAdd);

public:
    CDate (int nDay, int nMonth, int nYear): m_nDay(nDay), m_nMonth(nMonth), m_nYear(nYear){}
    void DisplayDate() {
        cout << m_nDay << "/" << m_nMonth << "/" << m_nYear;
    }

    operator int();
// 下面的==和!=就是用operator进行了重定义，还有上一行的int()也就是整形数据的定义符也进行了重定义
    bool operator == (const CDate& mDateObj);
    bool operator == (int nDateNumber);
    bool operator != (const CDate& mDateObj);
    bool operator != (int dDateNumber);
};

CDate::operator int()
{
    return (m_nYear*10000) + (m_nMonth*100) + m_nDay;
}

bool CDate::operator == (const CDate& mDateObj)
{
    return ( (mDateObj.m_nYear == m_nYear) && (mDateObj.m_nMonth == m_nMonth) && (mDateObj.m_nDay == m_nDay) );
}

bool CDate::operator == (int nDateNumber)
{
    return nDateNumber == (int)*this;
}

bool CDate::operator != (const CDate& mDateObj)
{
    return !(this->operator == (mDateObj));
}

bool CDate::operator!=(int nDateNumber) {
    return !(this->operator == (nDateNumber));
}

void CDate::AddDays(int nDaysToAdd) {
    m_nDay += nDaysToAdd;
    if (m_nDay > 30)
    {
        AddMonths(m_nDay/30);
        m_nDay %= 30;
    }
}

void CDate::AddMonths(int nMonthToAdd) {
    m_nMonth += nMonthToAdd;
    if (m_nMonth > 12)
    {
        AddYears(m_nMonth/12);
        m_nMonth %= 12;
    }
}

void CDate::AddYears(int m_nYearsToAdd) {
    m_nYear += m_nYearsToAdd;
}

int main()
{
    CDate mDate1 (25, 6, 2008);
    cout << "mDate1 contans: ";
    mDate1.DisplayDate();
    cout << endl;

    CDate mDate2 (23, 5, 2009);
    cout << "mDate2 contains: ";
    mDate2.DisplayDate();
    cout << endl;
    if (mDate1 != mDate2) {
        cout << "The two dates are not equal... As expected!" << endl;
    }
    CDate mDate3 (23, 5, 2009);
    cout << "mDate3 contains: ";
    mDate3.DisplayDate();
    cout << endl;

    if (mDate3 == mDate2) cout << "The two dates are evaluated as equal" << endl;
    int nIntegerDate3 = mDate3;

    cout << "The integer equivalent of mDate3 is: " << nIntegerDate3 << endl;

    if (mDate3 == nIntegerDate3) cout << "The integer and mDate3 are equivalent" << endl;
    if (mDate1 != nIntegerDate3) cout << "The mDate1 is inequal to mDate3";

    return 0;
}
```