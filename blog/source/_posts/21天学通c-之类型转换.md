---
title: 21天学通c++ 之类型转换
date: 2019-09-24 17:41:46
tags:
---



什么是类型转换：《21天》这本书里的解释是：类型转换是一种机制，让程序员能够暂时或永久性改变编译器对对象的解释。

我去！what？什么叫做编译器对对象的解释？

然后查了一些资料好像有点明白了

例如：int 3是不能当成float的3.00使用的，如果一定要用就得把int变成float，虽然实际还是3，但是编译器很在意这个差别，所有就得转换。

下面是dynamic_case转换操作符的实例，程序清单14.1 有助于判断Animal是dog还是cat的动态转换
```
#include <iostream>
using namespace std;

class CAnimal
{
public:
    virtual void Speak () = 0;
};

class CDog:public CAnimal
{
public:
    void WagTail() { cout << "Dog:";}
    void Speak() {cout << "Dog:BOW - BOW" << endl;}
};

class CCat:public CAnimal
{
public:
    void CatchMice () { cout << "Cat:" << endl; }
    void Speak () { cout << "Cat: Meow!" << endl; }
};

void DetermineType (CAnimal* pAnimal);

int main()
{
    CAnimal* pAnimal1 = new CDog();
    CAnimal* pAnimal2 = new CCat();

    cout << "Using dynamic_case to determine type of Animal 1" << endl;
    DetermineType(pAnimal1);

    cout << "Using dynamic_case to determine type of Animal 2" << endl;
    DetermineType(pAnimal2);

    cout << "speak" << endl;
    pAnimal1->Speak();

    cout << "speak2" << endl;
    pAnimal2->Speak();
    return 0;
}

void DetermineType(CAnimal* pAnimal)
{
    CDog* pDog = dynamic_cast<CDog*>(pAnimal);
    if(pDog)
    {
        cout << "The animal is a dog!" << endl;
        pDog->WagTail();
    }

    CCat* cCAT = dynamic_cast<CCat*>(pAnimal);
    if (cCAT)
    {
        cout << "The animal is a cat!" << endl;
        cCAT->CatchMice();
    }
}

```